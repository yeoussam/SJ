<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Lesson 1 Â· Happy Together í”Œë˜ì‹œì¹´ë“œ</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&family=Baloo+2:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root {
    --c1: #FF6B6B; --c2: #FFD93D; --c3: #6BCB77; --c4: #4D96FF;
    --c5: #FF922B; --c6: #CC5DE8; --c7: #20C997; --c8: #F06595;
    --bg: #FFF9F0; --text: #2D2D2D; --muted: #888;
    --radius: 24px; --shadow: 0 12px 40px rgba(0,0,0,0.15);
  }
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: 'Nunito', sans-serif;
    background: var(--bg);
    min-height: 100vh;
    display: flex; flex-direction: column; align-items: center;
    padding: 16px;
    background-image: radial-gradient(circle at 20% 20%, #FFD93D22 0%, transparent 50%),
                      radial-gradient(circle at 80% 80%, #6BCB7722 0%, transparent 50%);
  }
  header {
    text-align: center; margin-bottom: 16px; width: 100%;
  }
  header h1 {
    font-family: 'Baloo 2', cursive;
    font-size: clamp(1.4rem, 4vw, 2rem);
    font-weight: 800;
    background: linear-gradient(135deg, var(--c1), var(--c6));
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  }
  header p { font-size: 0.85rem; color: var(--muted); margin-top: 2px; }

  /* Progress */
  .progress-wrap { width: 100%; max-width: 560px; margin-bottom: 12px; }
  .progress-bar-bg {
    background: #E9ECEF; border-radius: 99px; height: 10px; overflow: hidden;
  }
  .progress-bar-fill {
    height: 100%; border-radius: 99px;
    background: linear-gradient(90deg, var(--c4), var(--c6));
    transition: width 0.4s ease;
  }
  .progress-text {
    text-align: right; font-size: 0.78rem; color: var(--muted); margin-top: 4px;
    font-weight: 700;
  }

  /* Controls */
  .controls {
    display: flex; gap: 8px; flex-wrap: wrap; justify-content: center;
    margin-bottom: 16px;
  }
  .btn {
    font-family: 'Nunito', sans-serif;
    font-weight: 800; font-size: 0.82rem;
    padding: 8px 16px; border: none; border-radius: 99px;
    cursor: pointer; transition: transform 0.15s, box-shadow 0.15s;
    box-shadow: 0 3px 10px rgba(0,0,0,0.12);
    -webkit-tap-highlight-color: transparent;
  }
  .btn:active { transform: scale(0.93); }
  .btn-shuffle { background: var(--c2); color: #333; }
  .btn-restart { background: var(--c3); color: #fff; }
  .btn-grid { background: var(--c4); color: #fff; }

  /* Card Scene */
  .scene {
    perspective: 1200px;
    width: min(420px, 90vw);
    height: min(280px, 55vw);
    margin-bottom: 20px;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
  }
  .card {
    width: 100%; height: 100%;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 0.55s cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: var(--radius);
  }
  .card.flipped { transform: rotateY(180deg); }
  .card-face {
    position: absolute; inset: 0;
    border-radius: var(--radius);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    padding: 24px;
    box-shadow: var(--shadow);
    user-select: none;
  }
  .card-front {
    background: linear-gradient(145deg, var(--card-a), var(--card-b));
    color: #fff;
  }
  .card-back {
    background: #fff;
    transform: rotateY(180deg);
    border: 4px solid var(--card-a);
    color: var(--text);
  }
  .card-emoji {
    font-size: clamp(3rem, 10vw, 5rem);
    line-height: 1;
    margin-bottom: 8px;
    animation: bounce 2s infinite;
  }
  @keyframes bounce {
    0%,100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
  }
  .card-word {
    font-family: 'Baloo 2', cursive;
    font-size: clamp(1.6rem, 5vw, 2.4rem);
    font-weight: 800;
    text-align: center;
    text-shadow: 0 2px 6px rgba(0,0,0,0.15);
    line-height: 1.1;
  }
  .card-hint {
    font-size: 0.75rem; opacity: 0.75; margin-top: 8px;
    font-weight: 600; letter-spacing: 0.05em; text-transform: uppercase;
  }
  .card-korean {
    font-size: clamp(1.1rem, 4vw, 1.6rem);
    font-weight: 700; text-align: center; line-height: 1.4;
    color: var(--text);
  }
  .card-word-small {
    font-size: 0.9rem; color: var(--muted);
    margin-top: 8px; font-weight: 600;
  }

  /* Nav buttons */
  .nav {
    display: flex; gap: 16px; align-items: center; margin-bottom: 20px;
  }
  .nav-btn {
    width: 52px; height: 52px; border-radius: 50%; border: none;
    font-size: 1.4rem; cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: transform 0.15s, box-shadow 0.15s;
    box-shadow: 0 4px 14px rgba(0,0,0,0.12);
    -webkit-tap-highlight-color: transparent;
  }
  .nav-btn:active { transform: scale(0.88); }
  .nav-prev { background: var(--c8); color: #fff; }
  .nav-next { background: var(--c4); color: #fff; }
  .nav-counter {
    font-family: 'Baloo 2', cursive;
    font-size: 1.1rem; font-weight: 800;
    min-width: 80px; text-align: center;
    color: var(--text);
  }

  /* Grid View */
  .grid-view { display: none; width: 100%; max-width: 900px; }
  .grid-view.active { display: block; }
  .grid-view h2 {
    font-family: 'Baloo 2', cursive;
    font-size: 1.3rem; font-weight: 800; text-align: center;
    margin-bottom: 16px; color: var(--text);
  }
  .grid-cards {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 12px;
  }
  .grid-card {
    border-radius: 16px;
    padding: 14px 12px;
    text-align: center;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    color: #fff;
  }
  .grid-card:hover { transform: translateY(-4px); box-shadow: 0 8px 20px rgba(0,0,0,0.15); }
  .grid-card:active { transform: scale(0.95); }
  .grid-card .g-emoji { font-size: 1.8rem; }
  .grid-card .g-word { font-weight: 800; font-size: 0.9rem; margin-top: 4px; line-height: 1.2; }
  .grid-card .g-korean { font-size: 0.75rem; margin-top: 4px; opacity: 0.9; }

  .flashcard-view { display: flex; flex-direction: column; align-items: center; width: 100%; }
  .flashcard-view.hidden { display: none; }

  @media (max-width: 420px) {
    .scene { height: 60vw; }
    .controls { gap: 6px; }
    .btn { padding: 7px 13px; font-size: 0.78rem; }
  }
</style>
</head>
<body>

<header>
  <h1>ğŸŒŸ Lesson 1 Â· Happy Together</h1>
  <p>ì¹´ë“œë¥¼ íƒ­í•˜ë©´ ë’¤ì§‘í˜€ìš”! ìŠ¤ì™€ì´í”„ë¡œ ë‹¤ìŒ ì¹´ë“œ</p>
</header>

<div class="progress-wrap">
  <div class="progress-bar-bg">
    <div class="progress-bar-fill" id="progressFill" style="width:0%"></div>
  </div>
  <div class="progress-text" id="progressText">0 / 81</div>
</div>

<div class="controls">
  <button class="btn btn-shuffle" onclick="shuffle()">ğŸ”€ ì…”í”Œ</button>
  <button class="btn btn-restart" onclick="restart()">ğŸ”„ ì²˜ìŒë¶€í„°</button>
  <button class="btn btn-grid" id="toggleViewBtn" onclick="toggleView()">âŠ ì „ì²´ë³´ê¸°</button>
</div>

<!-- Flashcard View -->
<div class="flashcard-view" id="flashcardView">
  <div class="scene" id="scene">
    <div class="card" id="card" onclick="flipCard()">
      <div class="card-face card-front">
        <div class="card-emoji" id="frontEmoji">ğŸŒŸ</div>
        <div class="card-word" id="frontWord">nice</div>
        <div class="card-hint">íƒ­í•˜ì—¬ ë’¤ì§‘ê¸°</div>
      </div>
      <div class="card-face card-back">
        <div class="card-korean" id="backKorean">[í˜•] ì¢‹ì€, ë©‹ì§„</div>
        <div class="card-word-small" id="backWord">nice</div>
      </div>
    </div>
  </div>

  <div class="nav">
    <button class="nav-btn nav-prev" onclick="prevCard()">â†</button>
    <div class="nav-counter" id="counter">1 / 81</div>
    <button class="nav-btn nav-next" onclick="nextCard()">â†’</button>
  </div>
</div>

<!-- Grid View -->
<div class="grid-view" id="gridView">
  <h2>ğŸ“š ì „ì²´ ë‹¨ì–´ ëª©ë¡</h2>
  <div class="grid-cards" id="gridCards"></div>
</div>

<script>
const vocab = [
  ["nice","[í˜•] ì¢‹ì€, ë©‹ì§„","ğŸ˜Š"],
  ["subject","[ëª…] ì£¼ì œ, ê³¼ëª©","ğŸ“š"],
  ["science","[ëª…] ê³¼í•™","ğŸ”¬"],
  ["meet","[ë™] ë§Œë‚˜ë‹¤","ğŸ¤"],
  ["play","[ë™] ì—°ì£¼í•˜ë‹¤","ğŸµ"],
  ["guitar","[ëª…] ê¸°íƒ€","ğŸ¸"],
  ["well","[ë¶€] ì˜","ğŸ‘"],
  ["what's up","ë­í•´?","ğŸ’¬"],
  ["Not much","ê·¸ëƒ¥ ê·¸ë˜. ë³„ê±° ì—†ì–´.","ğŸ¤·"],
  ["in front of","~ì•ì—","ğŸ“"],
  ["much","[ëŒ€] ë§ì´","ğŸ’¯"],
  ["read","[ë™] ì½ë‹¤","ğŸ“–"],
  ["favorite","[í˜•] ê°€ì¥ ì¢‹ì•„í•˜ëŠ”","â¤ï¸"],
  ["delicious","[í˜•] ë§›ìˆëŠ”","ğŸ˜‹"],
  ["bake","[ë™] êµ½ë‹¤","ğŸ"],
  ["want","[ë™] ì›í•˜ë‹¤","ğŸŒ "],
  ["smell","[ë™] ëƒ„ìƒˆê°€ ë‚˜ë‹¤","ğŸ‘ƒ"],
  ["baking","[ëª…] ì œë¹µ","ğŸ¥§"],
  ["again","[ë¶€] ë‹¤ì‹œ","ğŸ”"],
  ["how's it going","ì–´ë–»ê²Œ ì§€ë‚´?","ğŸ‘‹"],
  ["beautiful","[í˜•] ì•„ë¦„ë‹¤ìš´","ğŸŒ¸"],
  ["flower","[ëª…] ê½ƒ","ğŸŒº"],
  ["pretty","[í˜•] ì˜ˆìœ [ë¶€] ê½¤","ğŸŒ·"],
  ["soccer","[ëª…] ì¶•êµ¬","âš½"],
  ["saturday","[ëª…] í† ìš”ì¼","ğŸ“…"],
  ["together","[ë¶€] í•¨ê»˜","ğŸ¤—"],
  ["sometime","[ë¶€] ì–¸ì  ê°€","â³"],
  ["afternoon","[ëª…] ì˜¤í›„","ğŸŒ¤ï¸"],
  ["o'clock","[ë¶€] ì •ê°","ğŸ•"],
  ["sound","[ë™] ë“¤ë¦¬ë‹¤","ğŸ”Š"],
  ["gym","[ëª…] ì²´ìœ¡ê´€","ğŸ‹ï¸"],
  ["then","[ë¶€] ê·¸ë•Œ, ê·¸ ë‹¤ìŒì—","â­ï¸"],
  ["How about ~?","~ëŠ” ì–´ë•Œìš”?","ğŸ¤”"],
  ["perfect","[í˜•] ì™„ë²½í•œ","âœ¨"],
  ["singer","[ëª…] ê°€ìˆ˜","ğŸ¤"],
  ["basketball","[ëª…] ë†êµ¬","ğŸ€"],
  ["often","[ë¶€] ìì£¼","ğŸ”„"],
  ["best","[í˜•] ê°€ì¥ ì¢‹ì€","ğŸ¥‡"],
  ["friend","[ëª…] ì¹œêµ¬","ğŸ‘«"],
  ["rock","[ëª…] ë¡","ğŸ¸"],
  ["member","[ëª…] ë©¤ë²„","ğŸ‘¥"],
  ["drum","[ëª…] ë“œëŸ¼","ğŸ¥"],
  ["player","[ëª…] ì—°ì£¼ì","ğŸ¼"],
  ["have fun","ì¬ë¯¸ìˆê²Œ ë³´ë‚´ë‹¤","ğŸ‰"],
  ["with","[ì „] ~ì™€ í•¨ê»˜, ~ì„ ê°€ì§€ê³  ìˆëŠ”","ğŸ¤"],
  ["laugh","[ë™] ì›ƒë‹¤","ğŸ˜‚"],
  ["all the time","[ìˆ™] í•­ìƒ","â™¾ï¸"],
  ["neighbor","[ëª…] ì´ì›ƒ","ğŸ "],
  ["dear","[í˜•] ì†Œì¤‘í•œ","ğŸ’"],
  ["great","[í˜•] í›Œë¥­í•œ","ğŸŒŸ"],
  ["listener","[ëª…] ì²­ì·¨ì","ğŸ‘‚"],
  ["talk","[ë™] ì´ì•¼ê¸°í•˜ë‹¤","ğŸ’¬"],
  ["just","[ë¶€] ë°”ë¡œ, ë‹¨ì§€, ê·¸ëƒ¥, ë°©ê¸ˆ","ğŸ™‚"],
  ["nod","[ë™] ê³ ê°œë¥¼ ë„ë•ì´ë‹¤","ğŸ˜Œ"],
  ["smile","[ë™] ë¯¸ì†Œ ì§“ë‹¤","ğŸ˜„"],
  ["yummy","[í˜•] ë§›ìˆëŠ”","ğŸ˜"],
  ["feel","[ë™] ëŠë¼ë‹¤","ğŸ’­"],
  ["like","[ë™] ì¢‹ì•„í•˜ë‹¤ [ì „] ~ì²˜ëŸ¼","ğŸ’–"],
  ["magic","[ëª…] ë§ˆë²•","ğŸª„"],
  ["guide dog","[ëª…] ì•ˆë‚´ê²¬","ğŸ•"],
  ["by one's side","~ì˜ ì˜†ì—","ğŸ«‚"],
  ["24/7","í•­ìƒ (í•˜ë£¨24ì‹œê°„ ì¼ì£¼ì¼ë‚´ë‚´)","â°"],
  ["mind","[ë™] ì‹ ê²½ ì“°ë‹¤","ğŸ§ "],
  ["weekend","[ëª…] ì£¼ë§","ğŸŠ"],
  ["park","[ëª…] ê³µì›","ğŸŒ³"],
  ["free","[í˜•] ììœ ë¡œìš´","ğŸ•Šï¸"],
  ["strong","[í˜•] ê°•í•œ","ğŸ’ª"],
  ["special","[í˜•] íŠ¹ë³„í•œ","â­"],
  ["kind","[í˜•] ì¹œì ˆí•œ","ğŸŒˆ"],
  ["funny","[í˜•] ì¬ë¯¸ìˆëŠ”","ğŸ˜„"],
  ["swimming","[ëª…] ìˆ˜ì˜","ğŸŠ"],
  ["mostly","[ë¶€] ëŒ€ì²´ë¡œ, ì£¼ë¡œ","ğŸ“Š"],
  ["sometimes","[ë¶€] ê°€ë”","ğŸŒ“"],
  ["even","[ë¶€] ~ë„, ì‹¬ì§€ì–´","ğŸ¯"],
  ["wide","[í˜•] ë„“ì€","â†”ï¸"],
  ["band","[ëª…] ë°´ë“œ","ğŸ¶"],
  ["friendship","[ëª…] ìš°ì •","ğŸ‘"],
  ["guide","[ëª…] ì•ˆë‚´ì¸","ğŸ—ºï¸"],
  ["practice","[ë™] ì—°ìŠµí•˜ë‹¤ [ëª…] ì—°ìŠµ","ğŸ…"],
  ["person","[ëª…] ì‚¬ëŒ, ê°œì¸","ğŸ§‘"],
  ["feel at home","í¸ì•ˆí•¨ì„ ëŠë¼ë‹¤","ğŸ¡"]
];

const colors = [
  ["#FF6B6B","#FF922B"],["#4D96FF","#748FFC"],["#6BCB77","#20C997"],
  ["#CC5DE8","#F06595"],["#FFD93D","#FF922B"],["#20C997","#4D96FF"],
  ["#F06595","#CC5DE8"],["#FF922B","#FF6B6B"],
];

let order = [...Array(vocab.length).keys()];
let idx = 0;
let flipped = false;
let isGridView = false;
let startX = 0, startY = 0;

function getColor(i) { return colors[i % colors.length]; }

function speak(text) {
  if (!window.speechSynthesis) return;
  speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(text);
  u.lang = 'en-US'; u.rate = 0.9; u.pitch = 1;
  speechSynthesis.speak(u);
}

function setCard() {
  const i = order[idx];
  const [word, korean, emoji] = vocab[i];
  const [ca, cb] = getColor(i);
  const card = document.getElementById('card');
  card.style.setProperty('--card-a', ca);
  card.style.setProperty('--card-b', cb);
  document.getElementById('frontEmoji').textContent = emoji;
  document.getElementById('frontWord').textContent = word;
  document.getElementById('backKorean').textContent = korean;
  document.getElementById('backWord').textContent = word;
  // Reset flip
  if (flipped) { card.classList.remove('flipped'); flipped = false; }
  // Update counter & progress
  document.getElementById('counter').textContent = `${idx+1} / ${vocab.length}`;
  const pct = ((idx+1)/vocab.length*100).toFixed(0);
  document.getElementById('progressFill').style.width = pct + '%';
  document.getElementById('progressText').textContent = `${idx+1} / ${vocab.length}`;
  // Speak after short delay
  setTimeout(() => speak(word), 300);
}

function flipCard() {
  const card = document.getElementById('card');
  flipped = !flipped;
  card.classList.toggle('flipped', flipped);
}

function nextCard() {
  if (idx < vocab.length-1) { idx++; setCard(); }
}
function prevCard() {
  if (idx > 0) { idx--; setCard(); }
}
function shuffle() {
  for (let i = order.length-1; i > 0; i--) {
    const j = Math.floor(Math.random()*(i+1));
    [order[i],order[j]] = [order[j],order[i]];
  }
  idx = 0; setCard();
}
function restart() {
  order = [...Array(vocab.length).keys()];
  idx = 0; setCard();
}

function toggleView() {
  isGridView = !isGridView;
  document.getElementById('flashcardView').classList.toggle('hidden', isGridView);
  document.getElementById('gridView').classList.toggle('active', isGridView);
  document.getElementById('toggleViewBtn').textContent = isGridView ? 'ğŸƒ ì¹´ë“œë³´ê¸°' : 'âŠ ì „ì²´ë³´ê¸°';
  if (isGridView) buildGrid();
}

function buildGrid() {
  const container = document.getElementById('gridCards');
  container.innerHTML = '';
  vocab.forEach(([word, korean, emoji], i) => {
    const [ca] = getColor(i);
    const div = document.createElement('div');
    div.className = 'grid-card';
    div.style.background = `linear-gradient(145deg, ${getColor(i)[0]}, ${getColor(i)[1]})`;
    div.innerHTML = `<div class="g-emoji">${emoji}</div><div class="g-word">${word}</div><div class="g-korean">${korean}</div>`;
    div.addEventListener('click', () => {
      isGridView = false;
      document.getElementById('flashcardView').classList.remove('hidden');
      document.getElementById('gridView').classList.remove('active');
      document.getElementById('toggleViewBtn').textContent = 'âŠ ì „ì²´ë³´ê¸°';
      idx = order.indexOf(i) === -1 ? i : order.indexOf(i);
      if (order.indexOf(i) === -1) { order = [...Array(vocab.length).keys()]; idx = i; }
      setCard();
    });
    container.appendChild(div);
  });
}

// Touch / swipe
const scene = document.getElementById('scene');
scene.addEventListener('touchstart', e => { startX = e.touches[0].clientX; startY = e.touches[0].clientY; }, {passive:true});
scene.addEventListener('touchend', e => {
  const dx = e.changedTouches[0].clientX - startX;
  const dy = e.changedTouches[0].clientY - startY;
  if (Math.abs(dx) > Math.abs(dy) && Math.abs(dx) > 40) {
    if (dx < 0) nextCard(); else prevCard();
  } else if (Math.abs(dx) < 10 && Math.abs(dy) < 10) {
    flipCard();
  }
}, {passive:true});

// Keyboard
document.addEventListener('keydown', e => {
  if (e.key === 'ArrowRight') nextCard();
  else if (e.key === 'ArrowLeft') prevCard();
  else if (e.key === ' ') { e.preventDefault(); flipCard(); }
});

// Init
setCard();
</script>
</body>
</html>
